---
title:  "WIP - Deoldify"
mathjax: true
layout: post
categories: media
---

![Pisa](/assets\pictures\Deoldify\Pisa\Pisa_7.png)


## References

[Paris](https://www.cntraveler.com/gallery/vintage-photos-of-paris)
[Paris_5](https://en.wikipedia.org/wiki/File:Bundesarchiv_Bild_183-1985-1216-509,_Paris,_Oper.jpg)
[Paris_6](https://archives.paris.fr/_depot_ad75/_depot_arko/articles/1690/band1_jardin-du-luxembourg-aout-1944.-archives-de-paris-11fi-2697._img.jpg)

[Pisa](https://palazzoblu.it/mostra/gli-anni-50-le-immagini-di-un-decennio-a-pisa/)
[Pisa_6](https://citynews-pisatoday.stgy.ovh/~media/horizontal-hi/2182309983088/4-novembre-1966-alluvione-fiume-arno-pisa.jpg)
[Pisa_9](https://italia1943.altervista.org/wp-content/uploads/2016/03/pisa-1944.png)
[Pisa_10]()
[Pisa_11](https://www.intoscana.it/it/articolo/a-palazzo-blu-gli-anni-60-di-pisa-visti-dal-fotografo-luciano-frassi/)

[Rouen](https://www.annuaire-mairie.fr/photo-rouen.html)
[Rouen_1](http://www.fotographiaonline.com/hippolyte-bayard-1801-1887/)
[Rouen_2](https://www.geneanet.org/cartes-postales/view/371678#0)
[Rouen_10](https://upload.wikimedia.org/wikipedia/commons/c/ce/Bundesarchiv_Bild_146-1984-035-10A%2C_Frankreich%2C_Rouen%2C_besch%C3%A4digte_Kathedrale.jpg)

<!-- 
## Intro

Recently I went to an exposition of Escher’s artworks in Florence. It was amazing and I was so fascinated about the different details and all the optical elements of the different works. 

I wanted to try stable diffusion too so I had the idea to connect this obsessions in order to experiment with generative AI and write an something about it.

In particular, I was interested to see how an AI trained over millions of data such as Stable Diffusion could complete the Escher artwork “ Print Gallery”, which is the only incomplete work of him. Actually in the 00’s a mathematical has been capable to complete it with a specific thesis and formulas, and if you are interested (trust me it is) you read this paper. 

So I tried to experiment with several prompts, some of them have been generated by GPT-3 by using Chat-GPT but I used also some prompt from Lexica.com and someone that I made on my own.

Now let’s dive in this beautiful experiment by seeing the different results.

First of all i need to explain that i used 2 different masks to see the difference between the results

### Mask 1
0."*an illusionist geometric painting in seppia style, Maurits Cornelis Escher*"

![Print Gallery Escher](/assets/pictures/Escher/escher_mask_1/img_0_mask1.jpg)

In the 2nd and 3rd picture it realizes something similar to what I wrote and it can connects the new image with the original one.

1."*a street in a maze of many doorways and windows and boats and lots of stairs, many doorways, inside MC Escher architecture, artstation, Junji Ito, epic composition, detailed background*"

![Print Gallery Escher](/assets/pictures/Escher/escher_mask_1/img_1_mask1.jpg)

Here I used a lot of more details in order to understand how the algorithm could interpret my words and descriptions. It seems to be a little bit confused since the results are more chaotic than the previous ones.

2."*a spiral of doorways, windows, boats and stairs, inside MC Escher architecture, artstation, epic composition, detailed background*"

![Print Gallery Escher](/assets/pictures/Escher/escher_mask_1/img_2_mask1.jpg)

In this one I tried to remove some details and see what happens moreover a change the initial text with ‘a spiral’ since I wanted that kind of effect, even if it doesn’t seem to get so well this description, maybe the first one can be take into consideration. 

3."*an ornate illustration in the styles of mandalas and fractals, the styles of escher and penrose, depicting a weasel staring deep into the heart of the impossible all - and - nothing of the emerging singularity ; / what has god wrought? / he seems to be whispering.*"

![Print Gallery Escher](/assets/pictures/Escher/escher_mask_1/img_3_mask1.jpg)

Ok also for this one I tried something really detailed and difficult to understand maybe also for a normal intelligence, even if I am satisfied enough with the results in general.

4."*a maze made out of stairs, glass spheres, bubbles, deep vibrant colors, pastel colors, insanely Intricate, exquisitely ornate, art by Maurits Cornelis Escher and Victor Vasarely and Rob Gonsalves*"

![Print Gallery Escher](/assets/pictures/Escher/escher_mask_1/img_4_mask1.jpg)

I don’t know why it put a person inside the mask in this case, in general with this prompt it seems to understand the kind of bubble and sphere shapes.

5."*epic mural of technological change through history by marcus akinlana, basil wolverton, mc escher, dali, picasso, hr giger, wheres waldo, cybernetic river of transformation*"

![Print Gallery Escher](/assets/pictures/Escher/escher_mask_1/img_5_mask1.jpg)

Here I tried to insert more artistic style just to see if I could change the style of the painting in some way and indeed it does, he changed a lot the elements inside and here there is also one of my favorite result which is the 2nd one with the spiral wall and the black hole inside.

6."*heavy armor battle tank painted in white and black yin - yang dao symbol firing at dystopia, cosmos backdrop, detailed pencil drawing escher style xenopunk alien aesthetics*"

![Print Gallery Escher](/assets/pictures/Escher/escher_mask_1/img_6_mask1.jpg)

Also here I tried something similar to the previous one but the results are not so good actually…

7."*endless maze of stairs sketch art jim henson labyrinth*"

![Print Gallery Escher](/assets/pictures/Escher/escher_mask_1/img_7_mask1.jpg)

Here a more simple prompt without commas or similars just saying what I would like to have, so a maze with a different artistic style. It seems to get something for the first two pictures but not more than strange stairs.

8."*a detailed ilustration of a cosmic staircase that rises into itself, 4k, by M. C. Escher*"

![Print Gallery Escher](/assets/pictures/Escher/escher_mask_1/img_8_mask1.jpg)

More or less the aim of the prompt is the same of the previous one even if the results are a little bit better in my opinion.

9."*a detailed ilustration of a spiral fractal, 4k, by M. C. Escher*"

![Print Gallery Escher](/assets/pictures/Escher/escher_mask_1/img_9_mask1.jpg)

I can produce interesting result and they are detailed, except for the return of the spiral with a black hole

10."*a Droste effect drawing, 4k, by Maurits Cornelis Escher*"

![Print Gallery Escher](/assets/pictures/Escher/escher_mask_1/img_10_mask1.jpg)

The last picture here is really interesting since it seems to get what a Droste effect is.

11."*a man in a gallery viewing a print of a seaport, and among the buildings in the seaport is the very gallery in which he is standing, making use of the Droste effect with visual recursion, Maurits Cornelis Escher*"

![Print Gallery Escher](/assets/pictures/Escher/escher_mask_1/img_11_mask1.jpg)

Well here I tried with the Wikipedia description of the painting, and I have to admit that the results in general are not so bad at all.

12."*a man in a gallery*"

![Print Gallery Escher](/assets/pictures/Escher/escher_mask_1/img_12_mask1.jpg)

Really minimal prompt, maybe the 1st and the last one are good but the other ones are weird, the 3rd one is not even be completed

13."*a man in a gallery among buildings and windows, Droste effect, recursive, Maurits Cornelis Escher*"

![Print Gallery Escher](/assets/pictures/Escher/escher_mask_1/img_13_mask1.jpg)

The 2nd and the 3rd ones are more interesting than all the other ones, but it still miss something.

14."*an optical illusion of man in a gallery among buildings and windows, Droste effect, recursive, Maurits Cornelis Escher*"

![Print Gallery Escher](/assets/pictures/Escher/escher_mask_1/img_14_mask1.jpg)

Here it was really really confused, maybe I insert too many elements?

15."*an optical illusion of buildings and windows illustration, detailed*"

![Print Gallery Escher](/assets/pictures/Escher/escher_mask_1/img_15_mask1.jpg)

So I tried with less elements but just for the last one it gets what I described.

16."*an optical illusion of buildings and windows,detailed, 4k, Maurits Cornelis Escher*"

![Print Gallery Escher](/assets/pictures/Escher/escher_mask_1/img_16_mask1.jpg)

Just adding some more attributes to the prompt to see the differences, in reality it seems to produce more detailed results.

17."*an optical illusion of buildings and windows, Droste effect, recursive, detailed, Maurits Cornelis Escher*"

![Print Gallery Escher](/assets/pictures/Escher/escher_mask_1/img_17_mask1.jpg)

Changing the list of attributes, the 4th one seems to get more or less the kind of the description

18."*an optical illusion of buildings and windows, Droste effect, recursive, Maurits Cornelis Escher*"

![Print Gallery Escher](/assets/pictures/Escher/escher_mask_1/img_18_mask1.jpg)

Dropping the detailed attribute, it produced more interesting results in line with the description I wrote.

19."*escher architecture with buildings and boats, Droste effect, recursive, Maurits Cornelis Escher*"

![Print Gallery Escher](/assets/pictures/Escher/escher_mask_1/img_19_mask1.jpg)

I tried to insert more boats but nothing, really awkward result in the last one where it put just a spiral, maybe it’s getting to go lazy.

20."*escher architecture with buildings and boats, Droste effect, recursive*"

![Print Gallery Escher](/assets/pictures/Escher/escher_mask_1/img_20_mask1.jpg)

Last try, same prompt but removing the artistic style. I think that just the first one is quite good all the other are really weird results.

### Mask 2
0."*an illusionist geometric painting in seppia style, Maurits Cornelis Escher*"

![Print Gallery Escher](/assets/pictures/Escher/escher_mask_2/img_0.jpg)

It produces really interesting results, here I’m so curious about the second one where it draws a strange figure or statue inside the mask.

1."*a street in a maze of many doorways and windows and boats and lots of stairs, many doorways, inside MC Escher architecture, artstation, Junji Ito, epic composition, detailed background*"

![Print Gallery Escher](/assets/pictures/Escher/escher_mask_2/img_1.jpg)

The prompt probably is too detailed, it can be seen from the second image where it gets really confused on what to reproduce.

2."*a spiral of doorways, windows, boats and stairs, inside MC Escher architecture, artstation, epic composition, detailed background*"

![Print Gallery Escher](/assets/pictures/Escher/escher_mask_2/img_2.jpg)

In this case there are some very interesting results, it seems to understand for example to insert the windows, then in the first one it drew a person (maybe a sailor?) and for the last two images it tried to do something bad really bad.

3."*an ornate illustration in the styles of mandalas and fractals, the styles of escher and penrose, depicting a weasel staring deep into the heart of the impossible all - and - nothing of the emerging singularity ; / what has god wrought? / he seems to be whispering.*"

![Print Gallery Escher](/assets/pictures/Escher/escher_mask_2/img_3.jpg)

Yeah, probably this is a series of very ‘ornate’ illustrations, windows mixed with stairs, maybe some mandalas or fractals inside but that’s really difficult to understand actually.

4."*a maze made out of stairs, glass spheres, bubbles, deep vibrant colors, pastel colors, insanely Intricate, exquisitely ornate, art by Maurits Cornelis Escher and Victor Vasarely and Rob Gonsalves*"

![Print Gallery Escher](/assets/pictures/Escher/escher_mask_2/img_4.jpg)

I am pretty satisfied with these ones, it seems to understand well that I wanted a series of stairs, even if I cannot see any glass sphere or bubble.

5."*epic mural of technological change through history by marcus akinlana, basil wolverton, mc escher, dali, picasso, hr giger, wheres waldo, cybernetic river of transformation*"

![Print Gallery Escher](/assets/pictures/Escher/escher_mask_2/img_5.jpg)

The results are very weird and chaotics, It draws now the bubble I asked before. 

6."*heavy armor battle tank painted in white and black yin - yang dao symbol firing at dystopia, cosmos backdrop, detailed pencil drawing escher style xenopunk alien aesthetics*"

![Print Gallery Escher](/assets/pictures/Escher/escher_mask_2/img_6.jpg)

I asked for a heavy armor battle tank, it drew stairs and windows, the overall results are not bad but it’s not what I wrote.

7."*endless maze of stairs sketch art jim henson labyrinth*"

![Print Gallery Escher](/assets/pictures/Escher/escher_mask_2/img_7.jpg)

It tried to put a maze in the second one, for the rest the results are not so outstanding

8."*a detailed ilustration of a cosmic staircase that rises into itself, 4k, by M. C. Escher*"

![Print Gallery Escher](/assets/pictures/Escher/escher_mask_2/img_8.jpg)

Curious results, it can interpret probably the attributes except for cosmic, but there is some sort of staircase that rises into itself.

9."*a detailed ilustration of a spiral fractal, 4k, by M. C. Escher*"

![Print Gallery Escher](/assets/pictures/Escher/escher_mask_2/img_9.jpg)

Really confused results, probably it cannot understand so well how to put fractals and spiral together.

10."*a Droste effect drawing, 4k, by Maurits Cornelis Escher*"

![Print Gallery Escher](/assets/pictures/Escher/escher_mask_2/img_10.jpg)

Mmh nothing too intersting to see here.

11."*a man in a gallery viewing a print of a seaport, and among the buildings in the seaport is the very gallery in which he is standing, making use of the Droste effect with visual recursion, Maurits Cornelis Escher*"

![Print Gallery Escher](/assets/pictures/Escher/escher_mask_2/img_11.jpg)

I can see the boats and the seaport, all the rest are really confused creations.

12."*a man in a gallery*"

![Print Gallery Escher](/assets/pictures/Escher/escher_mask_2/img_12.jpg)

It produces more geometric results in here, the one with the triangle is really cool actually, anyway I don’t see any man in a gallery.

13."*a man in a gallery among buildings and windows, Droste effect, recursive, Maurits Cornelis Escher*"

![Print Gallery Escher](/assets/pictures/Escher/escher_mask_2/img_13.jpg)

Ok Probably here I was more detailed than before and it draws some building and windows, but still no man in a gallery.

14."*an optical illusion of man in a gallery among buildings and windows, Droste effect, recursive, Maurits Cornelis Escher*"

![Print Gallery Escher](/assets/pictures/Escher/escher_mask_2/img_14.jpg)

It seems to get what I wrote but when it tries to mix them it produces very confused results such as the last one.

15."*an optical illusion of buildings and windows illustration, detailed*"

![Print Gallery Escher](/assets/pictures/Escher/escher_mask_2/img_15.jpg)

No optical illusion, there are some buildings but it’s not very detailed in this case

16."*an optical illusion of buildings and windows,detailed, 4k, Maurits Cornelis Escher*"

![Print Gallery Escher](/assets/pictures/Escher/escher_mask_2/img_16.jpg)

Here effectively it produces more detailed draws than the previous ones, but still confused about the optical illusion.

17."*an optical illusion of buildings and windows, Droste effect, recursive, detailed, Maurits Cornelis Escher*"

![Print Gallery Escher](/assets/pictures/Escher/escher_mask_2/img_17.jpg)

These results are more well done, probably the recursive attribute help to get what I would like to see.

18."*an optical illusion of buildings and windows, Droste effect, recursive, Maurits Cornelis Escher*"

![Print Gallery Escher](/assets/pictures/Escher/escher_mask_2/img_18.jpg)

It draws finally a sort of Droste effect, it still really confused with the optical illusion but I got it, anyway I like the last two results.

19."*escher architecture with buildings and boats, Droste effect, recursive, Maurits Cornelis Escher*"

![Print Gallery Escher](/assets/pictures/Escher/escher_mask_2/img_19.jpg)

These results are really cool and probably are my favorite ones, it draws a kind of architecture mixed with boats and a Droste effect.

20."*escher architecture with buildings and boats, Droste effect, recursive*"

![Print Gallery Escher](/assets/pictures/Escher/escher_mask_2/img_20.jpg)

Also these ones are well, the results are surely very similar to the previous ones so probably write the artistic style is redundant.

## Papers and other similar projects

During my research on other completion or similar projects I found a paper that is also quite recent since it has been published in May 2022 and is a comparison between GANs and Diffusion models by completing the Escher Print Gallery painting.

Comparison of CoModGANs, LaMa and GLIDE for Art Inpainting- Completing M.C Escher's Print Gallery
Lucia Cipolina-Kun, Simone Caenazzo, Gaston Mazzei

Cite as : [arXiv:2205.01741](https://arxiv.org/abs/2205.01741)

In this article they tried and compared different inpainting models in particular CoModGANs [21], LaMa [19] and GLIDE [1] and they used them for restorative inpainting doing something similar to what i did so far with Stable diffusion, so Try to complete the hole inside the incomplete art work of Escher ‘Print Gallery’.

Eventually they found that the best one in this case was GLIDE which is a diffusion model and performs better than the other ones which are GANs. Like Stable Diffusion the results depends on many variables, Guidance, Temperature, Prompt and Mask. The final result down below is the best one that they cherry picked from other tentatives. It is really interesting that the most of their results are similar to the ones that I had with SD.

![GLIDE_result](/assets/pictures/Escher/Paper/GLIDE_0.png)

![GLIDE_result_zoom](/assets/pictures/Escher/Paper/GLIDE_1.png)


The real solution of the incomplete painting was given by the mathematician Hendrik Lenstra and his colleagues who achieved to fill the gap of the work of art with a formula and a computer program to calculate it and print it.

This is the completed result

![Lenstra](/assets/pictures/Escher/Lenstra.jpg)

If you are interested on that [here](https://www.universiteitleiden.nl/en/news/2020/04/how-mathematician-hendrik-lenstra-completed-an-unfinished-artwork-by-escher) there is the article that explain more in detail what and how they made it.


## Video

Astonshing video of the completed Print Gallery painting.

{% include embed.html url="https://www.youtube.com/embed/9WHdyG9mJaI" %} 

## Conclusions

This was a real intersting experiment to do with Stable Diffusion and generative ai model in general. It wasn't an easy job actually, since the Print Gallery painting is really complicated and ornate artwork, moreover it has to take in consideration also all the variables inside the Stable Diffusion model, like guidance, temperature, the prompt and of course the masks. 

Also from the results of other similar project it was difficult to reproduce and get a detailed image to complete the painting, of course it was possible from a mathematical point of view (probably the right one) but artistically speaking it was amazing see what SD has generated and try to figure it out all the results and why it did it like that. I think that this is the most enjoyable part of all this experiment. 

If you want to have a try you can find the colab notebook with the code here where you can also find the folder with all the masks and results. -->
